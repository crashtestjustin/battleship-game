(()=>{"use strict";const t=t=>({name:t,length:(()=>{switch(t){case"Carrier":return 5;case"Battleship":return 4;case"Destroyer":case"Submarine":return 3;case"Patrol Boat":return 2;default:return 0}})(),hitCount:0,sunk:!1,hit:function(){this.hitCount++,this.isSunk()},isSunk:function(){this.hitCount>=this.length&&(this.sunk=!0)}}),e=()=>({boardArray:[],missedGuesses:[],hitGuesses:[],shipsLeft:["Carrier","Battleship","Submarine","Destroyer","Patrol Boat"],shipsSunk:0,shipObjects:[],placeShipsRandom:function(){for(let e=0;e<this.shipsLeft.length;e++){let n=Math.random()>=.5,s=t(this.shipsLeft[e]),i=this.placeShipRecursive(s,n);this.boardArray.push(i),this.shipObjects.push(s),s.location=i}},placeShipRecursive:function(t,e){let s=n();return this.checkValidPlacement(t,s,e)||this.placeShipRecursive(t,e)},checkValidPlacement:function(t,e,n){let s=[];if(s.push(e),n&&e[0]+t.length>10)return!1;if(!n&&e[1]+t.length>10)return!1;for(let i=1;i<t.length;i++){let t;if(t=n?[e[0]+i,e[1]]:[e[0],e[1]+i],this.compareArrays(t))return!1;s.push(t)}return s},compareArrays:function(t,e){let n=!1;if(void 0===e){for(let e=0;e<this.boardArray.length;e++)if(this.boardArray[e].some((e=>e[0]===t[0]&&e[1]===t[1]))){n=!0;break}}else for(let s=0;s<t.length;s++)if(t[s][0]===e[0]&&t[s][1]===e[1]){n=!0;break}return n},checkForAllSunk:function(){let t=0;for(let e=0;e<this.shipObjects.length;e++)this.shipObjects[e].sunk&&t++;return this.shipsSunk=t,t},receiveAttack:function(t){let e=null;for(let n=0;n<this.shipObjects.length;n++){const s=this.shipObjects[n].location;if(this.compareArrays(s,t)){if(this.shipObjects[n].hit(),this.hitGuesses.push(t),e=this.shipObjects[n],e.sunk){this.shipsLeft=[];for(let t=0;t<this.shipObjects.length;t++)this.shipObjects[t].sunk||this.shipsLeft.push(this.shipObjects[t].name)}break}}if(null!==e){const t=this.checkForAllSunk();return 5===t?t:e}return this.missedGuesses.push(t),null}});function n(){return[parseInt(10*Math.random()),parseInt(10*Math.random())]}const s=t=>({name:t,CPU:"CPU"===t,oponentGameboard:e(),attackHistory:[],checkAttackHist:function(t){let e=this.attackHistory;for(let n of e)if(n[0]===t[0]&&n[1]===t[1])return!0;return!1},submitAttack:function(t){if(void 0===t){let e;do{e=n()}while(this.checkAttackHist(e));t=e}const e=this.oponentGameboard.receiveAttack(t);return this.attackHistory.push(t),e}});function i(t,e){const n=document.createElement("div");return n.className=t,n.id=e,"undefined"===n.id&&(n.id=t),n}!function(){const t=document.querySelector(".application"),e=function(){const t=i("header"),e=i("title");return e.textContent="Battleship Game",t.appendChild(e),t}();t.appendChild(e);const n=function(){const t=i("body"),e=i("body-title");e.textContent="Provide your name to start the game.";const n=i("game-inputs"),s=i("player-name-title");s.textContent="Your Name:";const r=function(t,e,n,s){const i=document.createElement("input");return i.type="text",i.id="name",i.placeholder="Enter your name captain!",i}(),o=function(t,e){const n=document.createElement("button");return n.className="start-game",n.textContent="Start Game",n}();n.append(s,r,o);const a=i("player-board-title");a.textContent="Your Ships";const c=i("board-div");c.classList.add("player-board");for(let t=0;t<100;t++){const t=i("grid-square");c.appendChild(t)}const h=i("cpu-board-title");h.textContent="Sink the Enemy Ships";const u=i("board-div");u.classList.add("cpu-board");for(let t=0;t<100;t++){const t=i("grid-square");u.appendChild(t)}return t.appendChild(e),t.append(n,a,c,h,u),t}();t.appendChild(n);const s=function(){const t=i("footer"),e=i("title");return e.textContent="Footer",t.appendChild(e),t}();t.appendChild(s)}(),document.querySelector(".start-game").addEventListener("click",(t=>{const e=s(document.querySelector("#name").value),n=s();e.oponentGameboard.placeShipsRandom(),n.oponentGameboard.placeShipsRandom(),console.log(e.oponentGameboard.shipObjects[0].location),console.log(n.oponentGameboard.shipObjects[1].location)}))})();